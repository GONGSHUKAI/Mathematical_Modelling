(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(exports,require('d3-voronoi-map')):typeof define==='function'&&define.amd?define(['exports','d3-voronoi-map'],factory):(factory((global.d3=global.d3||{}),global.d3));}(this,function(exports,voronoiMap){'use strict';voronoiMap='default'in voronoiMap?voronoiMap['default']:voronoiMap;function voronoiTreemap(){var DEFAULT_CONVERGENCE_RATIO=0.01;var DEFAULT_MAX_ITERATION_COUNT=50;var DEFAULT_MIN_WEIGHT_RATIO=0.01;var DEFAULT_PRNG=Math.random;var clip=[[0,0],[0,1],[1,1],[1,0],];var extent=[[0,0],[1,1],];var size=[1,1];var convergenceRatio=DEFAULT_CONVERGENCE_RATIO;var maxIterationCount=DEFAULT_MAX_ITERATION_COUNT;var minWeightRatio=DEFAULT_MIN_WEIGHT_RATIO;var prng=DEFAULT_PRNG;var unrelevantButNeedeData=[{weight:1,},{weight:1,},];var _convenientReusableVoronoiMap=voronoiMap.voronoiMapSimulation(unrelevantButNeedeData).stop();function _voronoiTreemap(rootNode){recurse(clip,rootNode);}
_voronoiTreemap.convergenceRatio=function(_){if(!arguments.length){return convergenceRatio;}
convergenceRatio=_;return _voronoiTreemap;};_voronoiTreemap.maxIterationCount=function(_){if(!arguments.length){return maxIterationCount;}
maxIterationCount=_;return _voronoiTreemap;};_voronoiTreemap.minWeightRatio=function(_){if(!arguments.length){return minWeightRatio;}
minWeightRatio=_;return _voronoiTreemap;};_voronoiTreemap.clip=function(_){if(!arguments.length){return clip;}
_convenientReusableVoronoiMap.clip(_);clip=_convenientReusableVoronoiMap.clip();extent=_convenientReusableVoronoiMap.extent();size=_convenientReusableVoronoiMap.size();return _voronoiTreemap;};_voronoiTreemap.extent=function(_){if(!arguments.length){return extent;}
_convenientReusableVoronoiMap.extent(_);clip=_convenientReusableVoronoiMap.clip();extent=_convenientReusableVoronoiMap.extent();size=_convenientReusableVoronoiMap.size();return _voronoiTreemap;};_voronoiTreemap.size=function(_){if(!arguments.length){return size;}
_convenientReusableVoronoiMap.size(_);clip=_convenientReusableVoronoiMap.clip();extent=_convenientReusableVoronoiMap.extent();size=_convenientReusableVoronoiMap.size();return _voronoiTreemap;};_voronoiTreemap.prng=function(_){if(!arguments.length){return prng;}
prng=_;return _voronoiTreemap;};function recurse(clippingPolygon,node){var simulation;node.polygon=clippingPolygon;if(node.height!=0){simulation=voronoiMap.voronoiMapSimulation(node.children).clip(clippingPolygon).weight(function(d){return d.value;}).convergenceRatio(convergenceRatio).maxIterationCount(maxIterationCount).minWeightRatio(minWeightRatio).prng(prng).stop();var state=simulation.state();while(!state.ended){simulation.tick();state=simulation.state();}
state.polygons.forEach(function(cp){recurse(cp,cp.site.originalObject.data.originalData);});}}
return _voronoiTreemap;}
exports.voronoiTreemap=voronoiTreemap;Object.defineProperty(exports,'__esModule',{value:true});}));